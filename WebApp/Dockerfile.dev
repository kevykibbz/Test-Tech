# Development Dockerfile with hot reload support
FROM node:20-alpine

# Set working directory
WORKDIR /app

# Copy package files first for better layer caching
COPY package*.json ./

# Install dependencies
RUN npm ci

# Install Angular CLI globally for development
RUN npm install -g @angular/cli

# Set environment variables for file watching
ENV CHOKIDAR_USEPOLLING=true
ENV WATCHPACK_POLLING=true

# Expose port 4200
EXPOSE 4200

# Start the development server with polling and HMR enabled
CMD ["npm", "run", "start:docker"]
