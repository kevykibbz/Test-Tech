<div class="extraction-container">
  <h2>Contract Extraction</h2>
  
  <div class="loading" *ngIf="loading">
    Extracting contract information... This may take a moment.
  </div>
  
  <div class="error" *ngIf="error">
    {{ error }}
  </div>
  
  <!-- Tabs -->
  <div class="tabs">
    <button 
      class="tab-button" 
      [class.active]="activeTab === 'default'"
      (click)="onTabChange('default')">
      Default Contract
    </button>
    <button 
      class="tab-button" 
      [class.active]="activeTab === 'text'"
      (click)="onTabChange('text')">
      Text Input
    </button>
    <button 
      class="tab-button" 
      [class.active]="activeTab === 'file'"
      (click)="onTabChange('file')">
      File Upload
    </button>
  </div>
  
  <!-- Tab Content -->
  <div class="tab-content">
    <!-- Default Contract Tab -->
    <div *ngIf="activeTab === 'default'" class="tab-panel">
      <h3>Extract from Default Contract</h3>
      <p>This will extract information from the sample contract file included with the application.</p>
      <button (click)="onExtractDefault()" [disabled]="loading" class="btn btn-primary">
        Extract from Default Contract
      </button>
    </div>
    
    <!-- Text Input Tab -->
    <div *ngIf="activeTab === 'text'" class="tab-panel">
      <h3>Extract from Contract Text</h3>
      <div class="form-group">
        <label for="contractText">Contract Text:</label>
        <textarea 
          id="contractText"
          [(ngModel)]="contractText"
          placeholder="Paste your contract text here..."
          rows="10"
          class="form-control">
        </textarea>
      </div>
      <button 
        (click)="onExtractFromText()" 
        [disabled]="loading || !contractText.trim()" 
        class="btn btn-primary">
        Extract from Text
      </button>
    </div>
    
    <!-- File Upload Tab -->
    <div *ngIf="activeTab === 'file'" class="tab-panel">
      <h3>Extract from File</h3>
      <div class="form-group">
        <label for="fileInput">Select Contract File:</label>
        <input 
          type="file" 
          id="fileInput"
          (change)="onFileSelected($event)"
          accept=".pdf,.txt,.doc,.docx"
          class="form-control file-input">
        <small class="file-help">Supported formats: PDF, TXT, DOC, DOCX</small>
      </div>
      <div *ngIf="selectedFile" class="selected-file">
        Selected: {{ selectedFile.name }} ({{ (selectedFile.size / 1024 / 1024).toFixed(2) }} MB)
      </div>
      <button 
        (click)="onExtractFromFile()" 
        [disabled]="loading || !selectedFile" 
        class="btn btn-primary">
        Extract from File
      </button>
    </div>
  </div>
  
  <!-- Results -->
  <div *ngIf="result" class="results-section">
    <h3>Extraction Results</h3>
    
    <div class="results-grid">
      <!-- Basic Information -->
      <div class="result-card">
        <h4>Basic Information</h4>
        <div class="result-item">
          <label>Contract Type:</label>
          <span>{{ result.contractType || 'Not specified' }}</span>
        </div>
        <div class="result-item">
          <label>Contract Value:</label>
          <span>{{ formatValue(result.contractValue) }}</span>
        </div>
        <div class="result-item">
          <label>Effective Date:</label>
          <span>{{ formatDate(result.effectiveDate) }}</span>
        </div>
        <div class="result-item">
          <label>Expiration Date:</label>
          <span>{{ formatDate(result.expirationDate) }}</span>
        </div>
        <div class="result-item">
          <label>Governing Law:</label>
          <span>{{ result.governingLaw || 'Not specified' }}</span>
        </div>
        <div class="result-item">
          <label>Processing Time:</label>
          <span>{{ result.processingTime }}</span>
        </div>
      </div>
      
      <!-- Parties -->
      <div class="result-card">
        <h4>Parties</h4>
        <div *ngIf="result.parties.length > 0; else noParties">
          <div *ngFor="let party of result.parties" class="party-item">
            {{ party }}
          </div>
        </div>
        <ng-template #noParties>
          <div class="no-data">No parties identified</div>
        </ng-template>
      </div>
      
      <!-- Key Terms -->
      <div class="result-card">
        <h4>Key Terms</h4>
        <div *ngIf="result.keyTerms.length > 0; else noTerms">
          <div *ngFor="let term of result.keyTerms" class="term-item">
            ‚Ä¢ {{ term }}
          </div>
        </div>
        <ng-template #noTerms>
          <div class="no-data">No key terms identified</div>
        </ng-template>
      </div>
      
      <!-- Risks -->
      <div class="result-card">
        <h4>Identified Risks</h4>
        <div *ngIf="result.risks.length > 0; else noRisks">
          <div *ngFor="let risk of result.risks" class="risk-item">
            ‚ö†Ô∏è {{ risk }}
          </div>
        </div>
        <ng-template #noRisks>
          <div class="no-data">No risks identified</div>
        </ng-template>
      </div>
      
      <!-- Recommendations -->
      <div class="result-card">
        <h4>Recommendations</h4>
        <div *ngIf="result.recommendations.length > 0; else noRecommendations">
          <div *ngFor="let recommendation of result.recommendations" class="recommendation-item">
            üí° {{ recommendation }}
          </div>
        </div>
        <ng-template #noRecommendations>
          <div class="no-data">No recommendations provided</div>
        </ng-template>
      </div>
      
      <!-- Extracted Text -->
      <div class="result-card full-width">
        <h4>Extracted Text</h4>
        <div class="extracted-text">
          {{ result.extractedText || 'No text extracted' }}
        </div>
      </div>
    </div>
  </div>
</div>
